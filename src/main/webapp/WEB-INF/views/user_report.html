<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=500">
<link href="../resources/vendor/bootstrap/css/bootstrap.min.css"
	rel="stylesheet">

<!-- Custom styles for this template -->
<link href="../resources/css/modern-business.css" rel="stylesheet">
<link href="../resources/css/sb-admin.min.css" rel="stylesheet">
<link href="../resources/js/datatables/dataTables.bootstrap4.css"
	rel="stylesheet">
	<link href="../resources/css/loading.css" rel="stylesheet">

<link href="../resources/css/fonts/fontawesome-all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Graduate"
	rel="stylesheet">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Member Reports</title>
</head>
<body>
	<div th:include="thymeleaf/user-layout :: header"></div>
		<div id="loading-background">
			<div id="loader"></div>
		</div>
	<div class="content-wrapper">
		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12">
					<div class="row">
						<div class="col-lg-12 text-center">
							<h3 th:text="${userAccount.userProfile.first_name}+ ' ' +${userAccount.userProfile.last_name}"></h3>
						</div>
						<div class="col-lg-12 text-center">
							<h5>Total Funds Generated: <span th:text="${df2.format(total)}"></span></h5>
							<h5>Administration Fee (20%): -<span th:text="${df2.format(fee)}"></span></h5>
							<!-- <h4>Funds to be distributed: <span th:text="${df2.format(total-fee)}"></span></h4> -->
							<h4>Funds to be distributed: <span th:text="${df2.format(funds)}"></span></h4>
						</div>
						<div class="col-lg-10 col-centered">
							<div class="row">
								<div th:each="userAssociation,loop : ${userAccount.userProfile.userAssociation}" class="col-sm-3 mb-3 userAssociation" th:attr="data-index=${loop.index}, data-association=${userAssociation.association_id}, data-team=${userAssociation.team_id}, data-player=${userAssociation.player_id}, data-charity=${userAssociation.charity_id}, data-nonProf=${userAssociation.nonprof_id}, data-personal=${userAssociation.personal}">
										<div class="card box">
											<div class="card-body">
											<p class="card-text small"><span th:text="${userAssociation.donation_amount.multiply(100)}"></span>%</p>
											<p class="card-text small">To Be Distributed: <span th:text="${df2.format(userAssociation.userAssociationInfo.total_amount)}"></span></p>
											</div>
										</div>
									</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-12">
					<div class="card mb-3">
						<div class="card-header">
							<i class="fa fa-table"></i> Reports
							<div class="btn-group float-right" role="group" aria-label="Basic example">
							  <a th:href="@{/user/reports/pdf}" class="btn btn-secondary btn-sm" role="button" aria-pressed="true">PDF</a>
							</div>
						</div>
						<div class="card-body">
							<div class="table-responsive">
								<table class="table table-bordered table-striped" id="dataTable" width="100%" cellspacing="0">
									<thead>
										<tr>
											<th>Report #</th>
											<th>Business Id</th>
											<th>Amount of purchase</th>
											<th>Funds Generated</th>
											<th>Admin Fees (20%)</th>
											<th>To Be Distributed</th>
											<th>Date of Purchase</th>
											<th class="no-sort"></th>
										</tr>
									</thead>
									<tfoot>
										<tr>
											<th>Report #</th>
											<th>Business Id</th>
											<th>Amount of purchase</th>
											<th>Funds Generated</th>
											<th>Admin Fees (20%)</th>
											<th>To Be Distributed</th>
											<th>Date of Purchase</th>
											<th></th>
										</tr>
									</tfoot>
									<tbody>
										<tr th:each="report,loop : ${reports}">
												<td><span th:text="${report.transaction_id}"></span></td>
												<td><span th:text="${report.business_profile_id}"></span></td>
												<td><span th:text="${df2.format(report.total)}"></span></td>
												<td><span th:text="${df2.format(report.precent_total)}"></span></td>
												<td>-<span th:text="${df2.format(report.fee_total)}"></span></td>
												<td><span th:text="${df2.format(report.funds_total)}"></span></td>
												<td><span th:text="${report.date_of_purchase}"></span></td>
												<td><a
													th:href="@{/user/reports/detail(transaction_id=${report.transaction_id})}"
													class="btn btn-info">Details</a></td>
											</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="card-footer small text-muted">Updated yesterday
							at 11:59 PM</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script src="../resources/vendor/jquery/jquery.min.js"></script>
<script type="text/javascript"
	src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script
	src="//cdnjs.cloudflare.com/ajax/libs/jquery.matchHeight/0.7.0/jquery.matchHeight-min.js"></script>
<script src="../resources/vendor/popper/popper.min.js"></script>
<script src="../resources/js/datatables/jquery.dataTables.js"></script>
<script src="../resources/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="../resources/js/datatables/dataTables.bootstrap4.js"></script>
<script src="../resources/js/sb-admin.js"></script>
<!-- <script src="../resources/js/sb-admin-datatables.min.js"></script> -->
<script src="../resources/js/user_reports.js"></script>
</html>
